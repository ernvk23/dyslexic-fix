/*
  This stylesheet uses a smart scaling factor for font sizes and
  explicitly protects the font-family and spacing of code blocks,
  while allowing their font-size to be controlled.
*/

/* Apply OpenDyslexic font to all target text elements */
html.opendyslexic-active p,
html.opendyslexic-active li,
html.opendyslexic-active blockquote,
html.opendyslexic-active article,
html.opendyslexic-active section,
html.opendyslexic-active h1,
html.opendyslexic-active h2,
html.opendyslexic-active h3,
html.opendyslexic-active h4,
html.opendyslexic-active h5,
html.opendyslexic-active h6,
html.opendyslexic-active td,
html.opendyslexic-active th,
html.opendyslexic-active dt,
html.opendyslexic-active dd,
html.opendyslexic-active figcaption,
html.opendyslexic-active caption,
html.opendyslexic-active legend,
html.opendyslexic-active summary,
html.opendyslexic-active address,
html.opendyslexic-active q,
html.opendyslexic-active cite,
html.opendyslexic-active sub,
html.opendyslexic-active sup,
html.opendyslexic-active abbr,
html.opendyslexic-active time,
html.opendyslexic-active input[type="text"],
html.opendyslexic-active input[type="email"],
html.opendyslexic-active input[type="search"],
html.opendyslexic-active input[type="tel"],
html.opendyslexic-active input[type="url"],
html.opendyslexic-active input[type="password"],
html.opendyslexic-active input[type="number"],
html.opendyslexic-active input[type="date"],
html.opendyslexic-active input[type="datetime-local"],
html.opendyslexic-active input[type="time"],
html.opendyslexic-active input[type="week"],
html.opendyslexic-active input[type="month"],
html.opendyslexic-active textarea,
html.opendyslexic-active select,
html.opendyslexic-active option {
    font-family: 'OpenDyslexic', sans-serif !important;
}

html.opendyslexic-active div:not([class~="fa"]):not([class*="fa-"]):not([class*="icon"]):not([class*="material-symbols"]):not([class*="material-icons"]):not([class*="bi-"]):not([class*="glyph"]):not([class*="symbol"]):not([data-icon]):not([role="img"]):not([aria-hidden="true"]),
html.opendyslexic-active span:not([class~="fa"]):not([class*="fa-"]):not([class*="icon"]):not([class*="material-symbols"]):not([class*="material-icons"]):not([class*="bi-"]):not([class*="glyph"]):not([class*="symbol"]):not([data-icon]):not([role="img"]):not([aria-hidden="true"]),
html.opendyslexic-active a:not([class~="fa"]):not([class*="fa-"]):not([class*="icon"]):not([class*="material-symbols"]):not([class*="material-icons"]):not([class*="bi-"]):not([class*="glyph"]):not([class*="symbol"]):not([data-icon]):not([role="img"]):not([aria-hidden="true"]),
html.opendyslexic-active label:not([class~="fa"]):not([class*="fa-"]):not([class*="icon"]):not([class*="material-symbols"]):not([class*="material-icons"]):not([class*="bi-"]):not([class*="glyph"]):not([class*="symbol"]):not([data-icon]):not([role="img"]):not([aria-hidden="true"]),
html.opendyslexic-active button:not([class~="fa"]):not([class*="fa-"]):not([class*="icon"]):not([class*="material-symbols"]):not([class*="material-icons"]):not([class*="bi-"]):not([class*="glyph"]):not([class*="symbol"]):not([data-icon]):not([role="img"]):not([aria-hidden="true"]) {
    font-family: 'OpenDyslexic', sans-serif !important;
}

html.opendyslexic-active:not(#_) pre,
html.opendyslexic-active:not(#_) code,
html.opendyslexic-active:not(#_) kbd,
html.opendyslexic-active:not(#_) samp,
html.opendyslexic-active:not(#_) pre *,
html.opendyslexic-active:not(#_) code *,
html.opendyslexic-active:not(#_) kbd *,
html.opendyslexic-active:not(#_) samp * {
    font-family: revert !important;
    letter-spacing: initial !important;
    word-spacing: initial !important;
}

/* Define a scaling factor for secondary text elements */
html.opendyslexic-active {
    --od-secondary-scale-factor: 0.85;
}

/* Apply custom spacing ONLY to primary reading content and headings */
html.opendyslexic-active p,
html.opendyslexic-active blockquote,
html.opendyslexic-active article,
html.opendyslexic-active dd,
html.opendyslexic-active h1,
html.opendyslexic-active h2,
html.opendyslexic-active h3,
html.opendyslexic-active h4,
html.opendyslexic-active h5,
html.opendyslexic-active h6 {
    letter-spacing: var(--od-letter-spacing) !important;
    word-spacing: var(--od-word-spacing) !important;
    line-height: var(--od-line-height) !important;
}

/* Apply font size with scaling for different content types */
/* Full size for primary reading content */
html.opendyslexic-active p,
html.opendyslexic-active blockquote,
html.opendyslexic-active article {
    font-size: var(--od-font-size) !important;
}

/* Scaled size for secondary content */
html.opendyslexic-active li,
html.opendyslexic-active td,
html.opendyslexic-active th,
html.opendyslexic-active dd,
html.opendyslexic-active dt,
html.opendyslexic-active pre,
html.opendyslexic-active code,
html.opendyslexic-active kbd,
html.opendyslexic-active samp,
html.opendyslexic-active figcaption,
html.opendyslexic-active caption,
html.opendyslexic-active address,
html.opendyslexic-active legend,
html.opendyslexic-active summary,
html.opendyslexic-active q,
html.opendyslexic-active cite {
    font-size: calc(var(--od-font-size) * var(--od-secondary-scale-factor)) !important;
}

/* Normalize font size for inline elements to prevent compounding */
html.opendyslexic-active strong,
html.opendyslexic-active b,
html.opendyslexic-active em,
html.opendyslexic-active small,
html.opendyslexic-active mark,
html.opendyslexic-active cite,
html.opendyslexic-active q {
    font-size: inherit !important;
    font-weight: inherit !important;
}